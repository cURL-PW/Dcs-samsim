<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SA-2 SAMSIM - DCS World</title>
    <link rel="stylesheet" href="css/samsim.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1>SA-2 (S-75 Dvina) SAMSim</h1>
                <span class="subtitle">Enhanced Radar Simulation</span>
            </div>
            <div class="header-center">
                <div class="system-state" id="systemStateDisplay">
                    <span class="state-label">SYSTEM:</span>
                    <span class="state-value" id="systemState">OFFLINE</span>
                </div>
            </div>
            <div class="header-right">
                <div class="connection-status" id="connectionStatus">
                    <span class="status-dot disconnected"></span>
                    <span class="status-text">Disconnected</span>
                </div>
                <div class="mission-time" id="missionTime">00:00:00</div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content-enhanced">
            <!-- Left Column - Radar Displays -->
            <div class="radar-column">
                <!-- P-19 Early Warning Radar -->
                <section class="radar-panel p19-panel">
                    <div class="panel-header">
                        <span class="panel-title">P-19 "Flat Face" Early Warning</span>
                        <div class="radar-mode" id="p19ModeDisplay">OFF</div>
                    </div>
                    <div class="radar-container p19-container">
                        <canvas id="p19Scope" width="400" height="400"></canvas>
                    </div>
                    <div class="radar-controls compact">
                        <div class="control-group">
                            <label>Mode</label>
                            <select id="p19Mode">
                                <option value="0">OFF</option>
                                <option value="1">STANDBY</option>
                                <option value="2">ROTATE</option>
                                <option value="3">SECTOR</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>Range</label>
                            <select id="p19Range">
                                <option value="80">80 km</option>
                                <option value="160" selected>160 km</option>
                            </select>
                        </div>
                        <div class="p19-antenna-display">
                            <span>Antenna: </span>
                            <span id="p19AntennaAz">0</span>°
                        </div>
                    </div>
                </section>

                <!-- SNR-75 Fire Control Radar -->
                <section class="radar-panel snr75-panel">
                    <div class="panel-header">
                        <span class="panel-title">SNR-75 "Fan Song" Fire Control</span>
                        <div class="radar-mode" id="snr75ModeDisplay">OFF</div>
                    </div>
                    <div class="snr75-displays">
                        <div class="ppi-display">
                            <canvas id="snr75Scope" width="350" height="350"></canvas>
                        </div>
                        <div class="scope-displays">
                            <!-- A-Scope (Range) -->
                            <div class="a-scope-container">
                                <div class="scope-label">A-SCOPE (Range)</div>
                                <canvas id="aScope" width="200" height="120"></canvas>
                            </div>
                            <!-- B-Scope (Range-Elevation) -->
                            <div class="b-scope-container">
                                <div class="scope-label">B-SCOPE (Elevation)</div>
                                <canvas id="bScope" width="200" height="150"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="radar-controls compact">
                        <div class="control-group">
                            <label>Mode</label>
                            <select id="snr75Mode">
                                <option value="0">OFF</option>
                                <option value="1">STANDBY</option>
                                <option value="2">ACQUISITION</option>
                                <option value="3">TRACK COARSE</option>
                                <option value="4">TRACK FINE</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>Range</label>
                            <select id="snr75Range">
                                <option value="30">30 km</option>
                                <option value="65" selected>65 km</option>
                            </select>
                        </div>
                        <div class="antenna-controls">
                            <div class="control-group small">
                                <label>Az</label>
                                <input type="number" id="snr75Az" min="0" max="360" value="0" step="1">
                            </div>
                            <div class="control-group small">
                                <label>El</label>
                                <input type="number" id="snr75El" min="0" max="85" value="5" step="1">
                            </div>
                            <button id="btnCommandAntenna" class="btn btn-small">CMD</button>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Center Column - Target & Engagement -->
            <div class="control-column">
                <!-- Site Selection -->
                <div class="site-selector">
                    <label>Site:</label>
                    <select id="siteSelect">
                        <option value="">-- Select --</option>
                    </select>
                    <button id="initSiteBtn" class="btn btn-small btn-primary">+</button>
                </div>

                <!-- System Controls -->
                <div class="system-controls">
                    <h3>Power Control</h3>
                    <div class="button-row">
                        <button id="btnPowerOn" class="btn btn-power">STARTUP</button>
                        <button id="btnPowerOff" class="btn btn-standby">SHUTDOWN</button>
                    </div>
                    <div class="indicator-row">
                        <div class="indicator" id="indPower">
                            <span class="indicator-light"></span>
                            <span class="indicator-label">PWR</span>
                        </div>
                        <div class="indicator" id="indP19">
                            <span class="indicator-light"></span>
                            <span class="indicator-label">P-19</span>
                        </div>
                        <div class="indicator" id="indSNR">
                            <span class="indicator-light"></span>
                            <span class="indicator-label">SNR</span>
                        </div>
                        <div class="indicator" id="indTrack">
                            <span class="indicator-light"></span>
                            <span class="indicator-label">TRK</span>
                        </div>
                        <div class="indicator" id="indGuide">
                            <span class="indicator-light"></span>
                            <span class="indicator-label">GDE</span>
                        </div>
                    </div>
                </div>

                <!-- EW Target List -->
                <div class="target-list-container">
                    <h3>EW Radar Tracks (P-19)</h3>
                    <div class="target-list" id="ewTargetList">
                        <div class="no-targets">No tracks</div>
                    </div>
                </div>

                <!-- Tracked Target Info -->
                <div class="tracked-target" id="trackedTargetPanel">
                    <h3>Fire Control Track (SNR-75)</h3>
                    <div class="target-data" id="trackedTargetData">
                        <div class="data-grid">
                            <div class="data-cell">
                                <span class="data-label">ID</span>
                                <span class="data-value" id="tgtId">---</span>
                            </div>
                            <div class="data-cell">
                                <span class="data-label">Range</span>
                                <span class="data-value" id="tgtRange">---</span>
                            </div>
                            <div class="data-cell">
                                <span class="data-label">Azimuth</span>
                                <span class="data-value" id="tgtAzimuth">---</span>
                            </div>
                            <div class="data-cell">
                                <span class="data-label">Elev</span>
                                <span class="data-value" id="tgtElevation">---</span>
                            </div>
                            <div class="data-cell">
                                <span class="data-label">Alt</span>
                                <span class="data-value" id="tgtAltitude">---</span>
                            </div>
                            <div class="data-cell">
                                <span class="data-label">Speed</span>
                                <span class="data-value" id="tgtSpeed">---</span>
                            </div>
                            <div class="data-cell">
                                <span class="data-label">Heading</span>
                                <span class="data-value" id="tgtHeading">---</span>
                            </div>
                            <div class="data-cell">
                                <span class="data-label">Closure</span>
                                <span class="data-value" id="tgtClosure">---</span>
                            </div>
                            <div class="data-cell">
                                <span class="data-label">Cross Ang</span>
                                <span class="data-value" id="tgtCrossing">---</span>
                            </div>
                            <div class="data-cell wide">
                                <span class="data-label">Track Quality</span>
                                <div class="quality-bar">
                                    <div class="quality-fill" id="trackQualityBar"></div>
                                </div>
                                <span class="data-value" id="trackQuality">0%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Engagement Controls -->
                <div class="engagement-controls">
                    <h3>Engagement Control</h3>
                    <div class="button-row">
                        <button id="btnDesignate" class="btn btn-designate">DESIGNATE</button>
                        <button id="btnDropTrack" class="btn btn-drop">DROP TRK</button>
                    </div>
                    <div class="toggle-row">
                        <label class="toggle">
                            <input type="checkbox" id="autoTrackToggle">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Auto Track</span>
                        </label>
                        <label class="toggle">
                            <input type="checkbox" id="engAuthToggle">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Weapons Free</span>
                        </label>
                    </div>
                    <div class="toggle-row">
                        <label class="toggle">
                            <input type="checkbox" id="autoEngToggle">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Auto Engage</span>
                        </label>
                        <label class="toggle">
                            <input type="checkbox" id="burstModeToggle">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Burst (2 MSL)</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Right Column - Firing Solution & Missiles -->
            <div class="firing-column">
                <!-- Firing Solution -->
                <section class="firing-solution-panel">
                    <h3>Firing Solution Computer</h3>
                    <div class="firing-solution-display">
                        <div class="launch-zone-indicator">
                            <div class="zone-label">LAUNCH ZONE</div>
                            <div class="zone-display" id="launchZoneDisplay">
                                <span class="zone-text" id="launchZone">---</span>
                            </div>
                        </div>
                        <div class="pk-display">
                            <div class="pk-label">KILL PROBABILITY</div>
                            <div class="pk-gauge">
                                <div class="pk-fill" id="pkFill"></div>
                                <span class="pk-value" id="pkValue">0%</span>
                            </div>
                        </div>
                        <div class="solution-data">
                            <div class="solution-row">
                                <span class="solution-label">Time to Intercept:</span>
                                <span class="solution-value" id="timeToIntercept">--- sec</span>
                            </div>
                            <div class="solution-row">
                                <span class="solution-label">Lead Angle:</span>
                                <span class="solution-value" id="leadAngle">---°</span>
                            </div>
                            <div class="solution-row">
                                <span class="solution-label">Missile TOF:</span>
                                <span class="solution-value" id="missileTOF">--- sec</span>
                            </div>
                        </div>
                    </div>
                    <div class="launch-button-container">
                        <button id="btnLaunch" class="btn btn-launch">
                            <span class="launch-icon">&#9650;</span>
                            LAUNCH MISSILE
                        </button>
                    </div>
                </section>

                <!-- Missile Status -->
                <section class="missile-panel">
                    <h3>V-750 Missile Battery</h3>
                    <div class="missile-display">
                        <div class="missile-count">
                            <span class="missile-number" id="missilesReady">6</span>
                            <span class="missile-label">/ 6 Ready</span>
                        </div>
                        <div class="missile-indicators" id="missileIndicators">
                        </div>
                    </div>
                    <div class="missiles-in-flight">
                        <span class="label">In Flight:</span>
                        <span class="value" id="missilesInFlight">0</span>
                    </div>
                    <div class="missile-status-list" id="missileStatusList">
                    </div>
                </section>

                <!-- Event Log -->
                <section class="event-log-panel">
                    <h3>Event Log</h3>
                    <div class="event-log" id="eventLog">
                    </div>
                </section>
            </div>
        </main>

        <!-- Footer / Status Bar -->
        <footer class="status-bar">
            <div class="status-item">
                <span class="label">WebSocket:</span>
                <span class="value" id="wsStatus">Disconnected</span>
            </div>
            <div class="status-item">
                <span class="label">DCS:</span>
                <span class="value" id="dcsStatus">Not Connected</span>
            </div>
            <div class="status-item">
                <span class="label">Update Rate:</span>
                <span class="value" id="updateRate">-- Hz</span>
            </div>
            <div class="status-item">
                <span class="label">Last Update:</span>
                <span class="value" id="lastUpdate">--:--:--</span>
            </div>
        </footer>
    </div>

    <!-- Init Site Modal -->
    <div class="modal" id="initSiteModal">
        <div class="modal-content">
            <h2>Initialize SA-2 Site</h2>
            <div class="form-group">
                <label for="newSiteId">Site ID:</label>
                <input type="text" id="newSiteId" placeholder="e.g., SA2-ALPHA">
            </div>
            <div class="form-group">
                <label for="groupName">DCS Group Name:</label>
                <input type="text" id="groupName" placeholder="e.g., SA-2 Site 1">
            </div>
            <div class="modal-buttons">
                <button class="btn btn-primary" id="confirmInitSite">Initialize</button>
                <button class="btn btn-secondary" id="cancelInitSite">Cancel</button>
            </div>
        </div>
    </div>

    <script src="js/samsim.js"></script>
</body>
</html>
